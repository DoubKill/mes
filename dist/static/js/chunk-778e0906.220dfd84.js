(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-778e0906"],{1:function(e,t){},"1f6c":function(e,t,n){"use strict";n.d(t,"n",(function(){return l})),n.d(t,"Z",(function(){return s})),n.d(t,"J",(function(){return o})),n.d(t,"I",(function(){return u})),n.d(t,"E",(function(){return i})),n.d(t,"N",(function(){return c})),n.d(t,"f",(function(){return d})),n.d(t,"l",(function(){return h})),n.d(t,"P",(function(){return f})),n.d(t,"r",(function(){return g})),n.d(t,"d",(function(){return b})),n.d(t,"G",(function(){return m})),n.d(t,"V",(function(){return v})),n.d(t,"j",(function(){return p})),n.d(t,"L",(function(){return O})),n.d(t,"K",(function(){return j})),n.d(t,"M",(function(){return _})),n.d(t,"o",(function(){return y})),n.d(t,"R",(function(){return S})),n.d(t,"S",(function(){return w})),n.d(t,"D",(function(){return k})),n.d(t,"y",(function(){return P})),n.d(t,"C",(function(){return M})),n.d(t,"i",(function(){return T})),n.d(t,"T",(function(){return D})),n.d(t,"b",(function(){return I})),n.d(t,"A",(function(){return U})),n.d(t,"x",(function(){return x})),n.d(t,"z",(function(){return C})),n.d(t,"w",(function(){return L})),n.d(t,"c",(function(){return F})),n.d(t,"e",(function(){return B})),n.d(t,"k",(function(){return A})),n.d(t,"h",(function(){return Y})),n.d(t,"Q",(function(){return E})),n.d(t,"O",(function(){return N})),n.d(t,"m",(function(){return J})),n.d(t,"B",(function(){return W})),n.d(t,"t",(function(){return q})),n.d(t,"H",(function(){return $})),n.d(t,"v",(function(){return V})),n.d(t,"u",(function(){return R})),n.d(t,"X",(function(){return H})),n.d(t,"W",(function(){return z})),n.d(t,"s",(function(){return G})),n.d(t,"U",(function(){return Z})),n.d(t,"Y",(function(){return K})),n.d(t,"F",(function(){return Q})),n.d(t,"g",(function(){return X})),n.d(t,"a",(function(){return ee})),n.d(t,"p",(function(){return te})),n.d(t,"q",(function(){return ne}));var a=n("b775"),r=n("99b1");function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].GlobalCodesUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].WorkSchedulesUrl+t+"/":r["a"].WorkSchedulesUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].PlanSchedulesUrl+t+"/":r["a"].PlanSchedulesUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].PlanScheduleUrl+t+"/":r["a"].PlanScheduleUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].MaterialsUrl+t+"/":r["a"].MaterialsUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].ProductInfosUrl+t+"/":r["a"].ProductInfosUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].CopyProductInfosUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].EquipUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].RubberMaterialUrl+t+"/":r["a"].RubberMaterialUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].InternalMixerUrl+t+"/":r["a"].InternalMixerUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].ClassesListUrl+t+"/":r["a"].ClassesListUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].PalletFeedBacksUrl+t+"/":r["a"].PalletFeedBacksUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].TrainsFeedbacksUrl+t+"/":r["a"].TrainsFeedbacksUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].EchartsListUrl+t+"/":r["a"].EchartsListUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].ProductClassesPlanUrl+t+"/":r["a"].ProductClassesPlanUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function j(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].ProductClassesPlanPanycreateUrl+t+"/":r["a"].ProductClassesPlanPanycreateUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].ProductDayPlanNotice+t+"/":r["a"].ProductDayPlanNotice,method:e};return Object.assign(l,n),Object(a["a"])(l)}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].HomePageUrl+t+"/":r["a"].HomePageUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].TestIndicators+t+"/":r["a"].TestIndicators,method:e};return Object.assign(l,n),Object(a["a"])(l)}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].TestSubTypes+t+"/":r["a"].TestSubTypes,method:e};return Object.assign(l,n),Object(a["a"])(l)}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].MaterialTestOrders+t+"/":r["a"].MaterialTestOrders,method:e};return Object.assign(l,n),Object(a["a"])(l)}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].MatIndicatorTab+t+"/":r["a"].MatIndicatorTab,method:e};return Object.assign(l,n),Object(a["a"])(l)}function M(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].MaterialDataPoints+t+"/":r["a"].MaterialDataPoints,method:e};return Object.assign(l,n),Object(a["a"])(l)}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].DataPoints+t+"/":r["a"].DataPoints,method:e};return Object.assign(l,n),Object(a["a"])(l)}function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].TestTypes+t+"/":r["a"].TestTypes,method:e};return Object.assign(l,n),Object(a["a"])(l)}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].BatchingMaterials+t+"/":r["a"].BatchingMaterials,method:e};return Object.assign(l,n),Object(a["a"])(l)}function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].MatTestMethods+t+"/":r["a"].MatTestMethods,method:e};return Object.assign(l,n),Object(a["a"])(l)}function x(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].MatDataPointIndicators+t+"/":r["a"].MatDataPointIndicators,method:e};return Object.assign(l,n),Object(a["a"])(l)}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].MatTestIndicatorMethods+t+"/":r["a"].MatTestIndicatorMethods,method:e};return Object.assign(l,n),Object(a["a"])(l)}function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].LevelResult+t+"/":r["a"].LevelResult,method:e};return Object.assign(l,n),Object(a["a"])(l)}function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].ClassesBanburySummary+t+"/":r["a"].ClassesBanburySummary,method:e};return Object.assign(l,n),Object(a["a"])(l)}function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].CollectTrainsFeed+t+"/":r["a"].CollectTrainsFeed,method:e};return Object.assign(l,n),Object(a["a"])(l)}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].EquipBanburySummary+t+"/":r["a"].EquipBanburySummary,method:e};return Object.assign(l,n),Object(a["a"])(l)}function Y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].CutTimeCollect+t+"/":r["a"].CutTimeCollect,method:e};return Object.assign(l,n),Object(a["a"])(l)}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].SumSollectTrains+t+"/":r["a"].SumSollectTrains,method:e};return Object.assign(l,n),Object(a["a"])(l)}function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].PutPlanManagement+t+"/":r["a"].PutPlanManagement,method:e};return Object.assign(l,n),Object(a["a"])(l)}function J(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].FinalPlanManagement+t+"/":r["a"].FinalPlanManagement,method:e};return Object.assign(l,n),Object(a["a"])(l)}function W(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].MaterialCount+t+"/":r["a"].MaterialCount,method:e};return Object.assign(l,n),Object(a["a"])(l)}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].InventoryLog+t+"/":r["a"].InventoryLog,method:e};return Object.assign(l,n),Object(a["a"])(l)}function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].PalletTrainsFeedbacks+t+"/":r["a"].PalletTrainsFeedbacks,method:e};return Object.assign(l,n),Object(a["a"])(l)}function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].LbPlanManagement+t+"/":r["a"].LbPlanManagement,method:e};return Object.assign(l,n),Object(a["a"])(l)}function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].LabelPrint+t+"/":r["a"].LabelPrint,method:e};return Object.assign(l,n),Object(a["a"])(l)}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].UnqualifiedTrains+t+"/":r["a"].UnqualifiedTrains,method:e};return Object.assign(l,n),Object(a["a"])(l)}function z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].UnqualifiedDealOrders+t+"/":r["a"].UnqualifiedDealOrders,method:e};return Object.assign(l,n),Object(a["a"])(l)}function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].IntervalOutputStatistics+t+"/":r["a"].IntervalOutputStatistics,method:e};return Object.assign(l,n),Object(a["a"])(l)}function Z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].TrainsFeedbacksApiview+t+"/":r["a"].TrainsFeedbacksApiview,method:e};return Object.assign(l,n),Object(a["a"])(l)}function K(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].WeighInformationUrl+t+"/":r["a"].WeighInformationUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].MixerInformationUrl+t+"/":r["a"].MixerInformationUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function X(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].CurveInformationUrl+t+"/":r["a"].CurveInformationUrl,method:e};return Object.assign(l,n),Object(a["a"])(l)}function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:t?r["a"].AlarmLogList+t+"/":r["a"].AlarmLogList,method:e};return Object.assign(l,n),Object(a["a"])(l)}function te(e){return Object(a["a"])({url:r["a"].ImportMaterialMestMrders,method:"post",data:e})}function ne(e){return Object(a["a"])({url:r["a"].ImportMaterialMestMrders,method:"get",params:e,responseType:"blob"})}},2:function(e,t){},3:function(e,t){},cf45:function(e,t,n){"use strict";t["a"]={formLabelWidth:"120px",normalOutboundSwitch:!0,statusList:[{id:1,name:"完成"},{id:2,name:"执行中"},{id:3,name:"失败"},{id:4,name:"新建"},{id:5,name:"关闭"}]}},ed08:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return f}));n("fe59"),n("b130"),n("ecb4"),n("d497"),n("513c"),n("fe8a"),n("e18c"),n("84c2"),n("e35a"),n("1c2e"),n("90aa"),n("898e"),n("5e9f"),n("0d7a"),n("08ba");var a=n("f7f9"),r=n("4360"),l=n("ecc0"),s=n.n(l),o=n("d85b"),u=n.n(o);function i(e,t,n){var a=e?new Date(e):new Date,r={y:a.getFullYear(),m:c(a.getMonth()+1),d:c(a.getDate()),h:c(a.getHours()),i:c(a.getMinutes()),s:c(a.getSeconds()),a:c(a.getDay())};return t?r.y+"-"+r.m+"-"+r.d+" "+r.h+":"+r.i+":"+r.s:n&&"continuation"===n?r.y+r.m+r.d+r.h+r.i+r.s:r.y+"-"+r.m+"-"+r.d}function c(e){return e=Number(e),e<10?"0"+e:e}function d(e){if(!e&&"object"!==Object(a["a"])(e))throw new Error("error arguments","deepClone");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach((function(n){e[n]&&"object"===Object(a["a"])(e[n])?t[n]=d(e[n]):t[n]=e[n]})),t}function h(e){if(e&&e instanceof Array&&e.length>0){var t=r["a"].getters&&r["a"].getters.permission,n=t[e[0]];if(!n||0===n.length)return;var a=n.some((function(t){return t===e[1]}));return a}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}function f(e){var t=u.a.utils.table_to_book(document.querySelector("#out-table"),{raw:!0}),n=u.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{s.a.saveAs(new Blob([n],{type:"application/octet-stream"}),e+".xlsx")}catch(a){"undefined"!==typeof console&&console.log(a,n)}return n}},f72b:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",[n("el-col",{attrs:{span:14}},[n("el-card",{attrs:{shadow:"never"}},[n("el-calendar",{attrs:{"v-loading":e.trueCalendar},scopedSlots:e._u([{key:"dateCell",fn:function(t){var a=t.date,r=t.data;return[n("p",{staticClass:"[data.isSelected||_setDateModel(date,false)?'is-selected':'']",style:{color:e._setDateModel(a,!1)?"#67C23A":r.isSelected?"#409EFF":""}},[e._v(" "+e._s(r.day.split("-").slice(1).join("-"))+" "+e._s(e._setDateModel(a,!1)?"✔️":"")+" ")])]}}]),model:{value:e.calendarValue,callback:function(t){e.calendarValue=t},expression:"calendarValue"}})],1)],1),n("el-col",{attrs:{span:10}},[n("el-card",{attrs:{shadow:"never"}},[n("el-form",[n("el-form-item",[n("el-button",{staticStyle:{float:"right"},on:{click:e.generateScheduling}},[e._v("生成")])],1),n("el-form-item",{attrs:{label:"开始时间"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},on:{change:e.shiftsTimeChange},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1),n("el-form-item",{attrs:{label:"倒班时间"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.shiftsTimeChange},model:{value:e.workScheduleIndex,callback:function(t){e.workScheduleIndex=t},expression:"workScheduleIndex"}},e._l(e.workScheduleOptions,(function(e){return n("el-option",{key:e.value,attrs:{value:e.value,label:e.schedule_name}})})),1)],1),n("el-form-item",{attrs:{label:"倒班周期"}},[n("el-input-number",{attrs:{min:1},model:{value:e.changeShiftsPeriod,callback:function(t){e.changeShiftsPeriod=e._n(t)},expression:"changeShiftsPeriod"}})],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.classData,border:""}},[n("el-table-column",{attrs:{prop:"date",label:"日期"}}),n("el-table-column",{attrs:{prop:"start_time",label:"开始"}}),n("el-table-column",{attrs:{prop:"end_time",label:"结束"}}),n("el-table-column",{attrs:{prop:"classes_name",label:"班次"}}),n("el-table-column",{attrs:{label:"班组"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:t.row.group,callback:function(n){e.$set(t.row,"group",n)},expression:"scope.row.group"}},e._l(e.groups,(function(e){return n("el-option",{key:e.id,attrs:{label:e.global_name,value:e.id}})})),1)]}}])})],1)],1)],1)],1),n("el-row",[n("el-form",[n("el-form-item",[e.permissionObj.planschedule.indexOf("add")>-1?n("el-button",{staticStyle:{float:"right"},on:{click:e.savePlanSchedules}},[e._v("保存")]):e._e()],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.scheduleData}},[n("el-table-column",{attrs:{prop:"production_time",label:"生产日期"}}),n("el-table-column",{attrs:{prop:"day_of_the_week",label:"星期"}}),e._l(e.classes,(function(t,a){return n("el-table-column",{key:a,attrs:{label:t.global_name}},[n("el-table-column",{attrs:{label:"班组"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.group_infos[a]?t.row.group_infos[a].group_name:"")+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"休息"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.group_infos[a]?n("el-select",{model:{value:t.row.group_infos[a].is_rest,callback:function(n){e.$set(t.row.group_infos[a],"is_rest",n)},expression:"scope.row.group_infos[index].is_rest"}},e._l([{label:"否",value:!1},{label:"是",value:!0}],(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()]}}],null,!0)}),n("el-table-column",{attrs:{label:"开始"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.group_infos[a]?t.row.group_infos[a].start_time:"")+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"结束"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.group_infos[a]?t.row.group_infos[a].end_time:"")+" ")]}}],null,!0)})],1)}))],2)],1)],1)},r=[],l=(n("3466"),n("fe59"),n("513c"),n("e35a"),n("5e9f"),n("08ba"),n("e793")),s=n("cf24"),o=n.n(s),u=n("ed08"),i=n("cf45"),c=n("1f6c"),d=n("52c1"),h={data:function(){return{formLabelWidth:i["a"].formLabelWidth,startTime:Date.now(),workSchedules:[],workScheduleOptions:[],workScheduleIndex:null,classData:[],groups:[],groupById:{},groupIds:[],changeShiftsPeriods:[],changeShiftsPeriod:null,scheduleData:[],classes:[],fullscreenLoading:!1,classesByIndex:{},selectDateArr:[],calendarValue:"",trueCalendar:!1}},computed:Object(l["a"])({},Object(d["b"])(["permission"])),watch:{calendarValue:function(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1;if(this.planSchedule.month&&this.planSchedule.month!==a)return this.planSchedule={all:1,month:a,year:n},void this.getFactoryScheduling()}},created:function(){this.permissionObj=this.permission,this.planSchedule={all:1,month:(new Date).getMonth()+1,year:(new Date).getFullYear()},this.getFactoryScheduling();var e=this;Object(c["n"])("get",{params:{class_name:"倒班周期"}}).then((function(t){e.changeShiftsPeriods=t.results})).catch((function(){})),Object(c["n"])("get",{params:{class_name:"班组"}}).then((function(t){e.groups=t.results;for(var n=0;n<e.groups.length;++n)e.groupById[e.groups[n].id]=e.groups[n].global_name})).catch((function(){})),Object(c["n"])("get",{params:{class_name:"班次"}}).then((function(t){e.classes=t.results,console.log(e.classes,"app.classes")})).catch((function(){})),Object(c["Z"])("get",null,{params:{all:1}}).then((function(t){e.workSchedules=t.results;for(var n=0;n<e.workSchedules.length;++n){e.workSchedules[n]["group"]="";for(var a=e.workSchedules[n].classesdetail_set.length+"班次",r=0;r<e.workSchedules[n].classesdetail_set.length;++r)a+="["+(r+1)+"]-"+e.workSchedules[n].classesdetail_set[r].start_time+"/"+e.workSchedules[n].classesdetail_set[r].end_time;e.workScheduleOptions.push({value:n,label:a,schedule_name:e.workSchedules[n].schedule_name})}})).catch((function(){}))},methods:{setTimeStamp:function(){var e=[];return e=JSON.parse(JSON.stringify(this.selectDateArr)),this.selectDateArr.forEach((function(t,n){if(t.hasOwnProperty("day_time")&&t.day_time){var a=t.hasOwnProperty("day_time")?t.day_time:"";e[n].day_time=new Date(a.replace(/-/g,"/")).getTime()}else e[n].day_time=""})),e},_setDateModel:function(e,t){var n=Object(u["d"])(e,t),a=new Date(n.replace(/-/g,"/")).getTime(),r=this.selectDateArr.findIndex((function(e){return e.day_time===a}));return r>-1},dayOfWeek:function(e){switch(e){case 0:return"天";case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六"}},generateScheduling:function(){var e=o()(this.startTime),t=this.workSchedules[this.workScheduleIndex],n=Number(this.changeShiftsPeriod);this.scheduleData=[];for(var a=0;a<t.period*n;a++){for(var r=e.get("day"),l=e.format("YYYY-MM-DD"),s={production_time:l,day_of_the_week:"星期"+this.dayOfWeek(r),group_infos:[null,null,null]},u=this.classesByIndex[a%t.period],i=0;i<u.length;i++){var c=JSON.parse(JSON.stringify(u[i]));if(this.$set(c,"is_rest",!1),!c.group)return this.$alert("必须选择所有班组","错误",{confirmButtonText:"确定"}),void(this.scheduleData=[]);c.group_name=this.groupById[c.group];var d=0;switch(c.classes_name){case"早班":d=0;break;case"中班":d=1;break;case"夜班":d=2}s.group_infos[d]=c}this.scheduleData.push(s),e=e.add(1,"day")}},shiftsTimeChange:function(){this.classesByIndex={};for(var e=o()(this.startTime),t=this.workSchedules[this.workScheduleIndex],n=[],a=0;a<t.period;a++){var r=e.format("YYYY-MM-DD");this.classesByIndex[a]=[];for(var l=0;l<t.classesdetail_set.length;l++){var s=t.classesdetail_set[l];s.date=r;var u=JSON.parse(JSON.stringify(s));n.push(u),this.classesByIndex[a].push(u)}e=e.add(1,"day")}this.classData=n},savePlanSchedules:function(){for(var e=[],t=this.workSchedules[this.workScheduleIndex],n=0;n<this.scheduleData.length;n++){for(var a=this.scheduleData[n],r=[],l=0;l<a.group_infos.length;l++){var s=a.group_infos[l];s&&r.push({classes:s.classes,rest_flag:s.is_rest,group:s.group})}e.push({day_time:a.production_time,work_schedule:t.id,work_schedule_plan:r})}var o=this;Object(c["J"])("post",null,{data:e}).then((function(e){o.$message.success("排班创建成功")})).catch((function(){o.$alert("当前日期已存在此倒班","错误",{confirmButtonText:"确定"})}))},getFactoryScheduling:function(){this.trueCalendar=!0;var e=this,t={};Object.assign(t,this.planSchedule),Object(c["I"])("get",null,{params:t}).then((function(t){e.selectDateArr=t.results,e.selectDateArr=e.setTimeStamp(e.selectDateArr),e.trueCalendar=!1})).catch((function(){e.trueCalendar=!1}))}}},f=h,g=n("9ca4"),b=Object(g["a"])(f,a,r,!1,null,null,null);t["default"]=b.exports}}]);