(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5dea20b1"],{"1f6c":function(e,t,n){"use strict";n.d(t,"m",(function(){return i})),n.d(t,"W",(function(){return s})),n.d(t,"G",(function(){return o})),n.d(t,"F",(function(){return l})),n.d(t,"B",(function(){return c})),n.d(t,"K",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"l",(function(){return h})),n.d(t,"M",(function(){return g})),n.d(t,"o",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"D",(function(){return b})),n.d(t,"S",(function(){return v})),n.d(t,"j",(function(){return p})),n.d(t,"I",(function(){return O})),n.d(t,"H",(function(){return _})),n.d(t,"J",(function(){return j})),n.d(t,"n",(function(){return S})),n.d(t,"O",(function(){return M})),n.d(t,"P",(function(){return F})),n.d(t,"A",(function(){return C})),n.d(t,"v",(function(){return k})),n.d(t,"z",(function(){return U})),n.d(t,"i",(function(){return P})),n.d(t,"Q",(function(){return w})),n.d(t,"b",(function(){return y})),n.d(t,"x",(function(){return x})),n.d(t,"u",(function(){return T})),n.d(t,"w",(function(){return E})),n.d(t,"t",(function(){return L})),n.d(t,"c",(function(){return $})),n.d(t,"e",(function(){return I})),n.d(t,"k",(function(){return D})),n.d(t,"h",(function(){return N})),n.d(t,"N",(function(){return q})),n.d(t,"L",(function(){return V})),n.d(t,"y",(function(){return B})),n.d(t,"q",(function(){return W})),n.d(t,"E",(function(){return H})),n.d(t,"s",(function(){return R})),n.d(t,"r",(function(){return J})),n.d(t,"U",(function(){return A})),n.d(t,"T",(function(){return G})),n.d(t,"p",(function(){return z})),n.d(t,"R",(function(){return Q})),n.d(t,"V",(function(){return K})),n.d(t,"C",(function(){return Y})),n.d(t,"g",(function(){return X})),n.d(t,"a",(function(){return Z}));var a=n("b775"),r=n("99b1");function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].GlobalCodesUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].WorkSchedulesUrl+t+"/":r["a"].WorkSchedulesUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].PlanSchedulesUrl+t+"/":r["a"].PlanSchedulesUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].PlanScheduleUrl+t+"/":r["a"].PlanScheduleUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MaterialsUrl+t+"/":r["a"].MaterialsUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].ProductInfosUrl+t+"/":r["a"].ProductInfosUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].CopyProductInfosUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].EquipUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].RubberMaterialUrl+t+"/":r["a"].RubberMaterialUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].InternalMixerUrl+t+"/":r["a"].InternalMixerUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].ClassesListUrl+t+"/":r["a"].ClassesListUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].PalletFeedBacksUrl+t+"/":r["a"].PalletFeedBacksUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].TrainsFeedbacksUrl+t+"/":r["a"].TrainsFeedbacksUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].EchartsListUrl+t+"/":r["a"].EchartsListUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].ProductClassesPlanUrl+t+"/":r["a"].ProductClassesPlanUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].ProductClassesPlanPanycreateUrl+t+"/":r["a"].ProductClassesPlanPanycreateUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function j(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].ProductDayPlanNotice+t+"/":r["a"].ProductDayPlanNotice,method:e};return Object.assign(i,n),Object(a["a"])(i)}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].HomePageUrl+t+"/":r["a"].HomePageUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function M(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].TestIndicators+t+"/":r["a"].TestIndicators,method:e};return Object.assign(i,n),Object(a["a"])(i)}function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].TestSubTypes+t+"/":r["a"].TestSubTypes,method:e};return Object.assign(i,n),Object(a["a"])(i)}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MaterialTestOrders+t+"/":r["a"].MaterialTestOrders,method:e};return Object.assign(i,n),Object(a["a"])(i)}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MatIndicatorTab+t+"/":r["a"].MatIndicatorTab,method:e};return Object.assign(i,n),Object(a["a"])(i)}function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MaterialDataPoints+t+"/":r["a"].MaterialDataPoints,method:e};return Object.assign(i,n),Object(a["a"])(i)}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].DataPoints+t+"/":r["a"].DataPoints,method:e};return Object.assign(i,n),Object(a["a"])(i)}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].TestTypes+t+"/":r["a"].TestTypes,method:e};return Object.assign(i,n),Object(a["a"])(i)}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].BatchingMaterials+t+"/":r["a"].BatchingMaterials,method:e};return Object.assign(i,n),Object(a["a"])(i)}function x(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MatTestMethods+t+"/":r["a"].MatTestMethods,method:e};return Object.assign(i,n),Object(a["a"])(i)}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MatDataPointIndicators+t+"/":r["a"].MatDataPointIndicators,method:e};return Object.assign(i,n),Object(a["a"])(i)}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MatTestIndicatorMethods+t+"/":r["a"].MatTestIndicatorMethods,method:e};return Object.assign(i,n),Object(a["a"])(i)}function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].LevelResult+t+"/":r["a"].LevelResult,method:e};return Object.assign(i,n),Object(a["a"])(i)}function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].ClassesBanburySummary+t+"/":r["a"].ClassesBanburySummary,method:e};return Object.assign(i,n),Object(a["a"])(i)}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].CollectTrainsFeed+t+"/":r["a"].CollectTrainsFeed,method:e};return Object.assign(i,n),Object(a["a"])(i)}function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].EquipBanburySummary+t+"/":r["a"].EquipBanburySummary,method:e};return Object.assign(i,n),Object(a["a"])(i)}function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].CutTimeCollect+t+"/":r["a"].CutTimeCollect,method:e};return Object.assign(i,n),Object(a["a"])(i)}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].SumSollectTrains+t+"/":r["a"].SumSollectTrains,method:e};return Object.assign(i,n),Object(a["a"])(i)}function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].PutPlanManagement+t+"/":r["a"].PutPlanManagement,method:e};return Object.assign(i,n),Object(a["a"])(i)}function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MaterialCount+t+"/":r["a"].MaterialCount,method:e};return Object.assign(i,n),Object(a["a"])(i)}function W(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].InventoryLog+t+"/":r["a"].InventoryLog,method:e};return Object.assign(i,n),Object(a["a"])(i)}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].PalletTrainsFeedbacks+t+"/":r["a"].PalletTrainsFeedbacks,method:e};return Object.assign(i,n),Object(a["a"])(i)}function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].LbPlanManagement+t+"/":r["a"].LbPlanManagement,method:e};return Object.assign(i,n),Object(a["a"])(i)}function J(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].LabelPrint+t+"/":r["a"].LabelPrint,method:e};return Object.assign(i,n),Object(a["a"])(i)}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].UnqualifiedTrains+t+"/":r["a"].UnqualifiedTrains,method:e};return Object.assign(i,n),Object(a["a"])(i)}function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].UnqualifiedDealOrders+t+"/":r["a"].UnqualifiedDealOrders,method:e};return Object.assign(i,n),Object(a["a"])(i)}function z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].IntervalOutputStatistics+t+"/":r["a"].IntervalOutputStatistics,method:e};return Object.assign(i,n),Object(a["a"])(i)}function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].TrainsFeedbacksApiview+t+"/":r["a"].TrainsFeedbacksApiview,method:e};return Object.assign(i,n),Object(a["a"])(i)}function K(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].WeighInformationUrl+t+"/":r["a"].WeighInformationUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function Y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MixerInformationUrl+t+"/":r["a"].MixerInformationUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function X(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].CurveInformationUrl+t+"/":r["a"].CurveInformationUrl,method:e};return Object.assign(i,n),Object(a["a"])(i)}function Z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].AlarmLogList+t+"/":r["a"].AlarmLogList,method:e};return Object.assign(i,n),Object(a["a"])(i)}},"67b7":function(e,t,n){"use strict";var a=n("9cda"),r=n.n(a);r.a},"9cda":function(e,t,n){},cf45:function(e,t,n){"use strict";t["a"]={formLabelWidth:"120px",statusList:[{id:1,name:"完成"},{id:2,name:"执行中"},{id:3,name:"失败"},{id:4,name:"新建"},{id:5,name:"关闭"}]}},daa1:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return g}));var a=n("b775"),r=n("99b1");function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].MaterialQuantityDemandedUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].ClassArrangelUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].BanburyPlanUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].MaterialRepertoryUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].MaterialTypelUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].RubberRepertoryUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].StageGlobalUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function h(e){return Object(a["a"])({url:r["a"].EquipUrl,method:"get",params:e})}function g(){return Object(a["a"])({url:r["a"].GlobalCodesUrl,method:"get",params:{all:1,class_name:"工序"}})}},ef46:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("el-form",{attrs:{inline:!0}},[e.permissionObj.workschedule.indexOf("add")>-1?n("el-form-item",{staticStyle:{float:"right"}},[n("el-button",{on:{click:e.showDialogCreateChangeShiftsManage}},[e._v("新建")])],1):e._e()],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.workSchedules}},[n("el-table-column",{attrs:{prop:"schedule_no",label:"倒班代码",width:"80px"}}),n("el-table-column",{attrs:{prop:"schedule_name",label:"倒班名"}}),n("el-table-column",{attrs:{prop:"work_procedure_name",label:"工序",width:"60px"}}),n("el-table-column",{attrs:{prop:"period",label:"周期天数",width:"60px"}}),e._l(e.classes,(function(t,a){return n("el-table-column",{key:a,attrs:{label:t.global_name}},[n("el-table-column",{attrs:{label:"开始"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(" "+e._s(e.getTimeCell(n.row,t.id,"start_time"))+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"结束"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(" "+e._s(e.getTimeCell(n.row,t.id,"end_time"))+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"总时间"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(" "+e._s(e.getSum(n.row,t.id))+" ")]}}],null,!0)})],1)})),n("el-table-column",{attrs:{align:"center",formatter:e.formatter,prop:"used_flag",label:"使用与否",width:"60px"}}),n("el-table-column",{attrs:{width:"150",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button-group",[e.permissionObj.workschedule.indexOf("change")>-1?n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.showEditChangeShiftsManageDialog(t.row)}}},[e._v("编辑 ")]):e._e(),e.permissionObj.workschedule.indexOf("delete")>-1?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.handleDeleteChangeShiftsManage(t.row)}}},[e._v(e._s(t.row.use_flag?"停用":"启用")+" ")]):e._e()],1)]}}])})],2),n("pagination",{attrs:{total:e.total,"current-page":e.getParams.page},on:{currentChange:e.currentChange}}),n("el-dialog",{attrs:{title:"添加倒班时间",visible:e.dialogCreateChangeShiftsManageVisible},on:{"update:visible":function(t){e.dialogCreateChangeShiftsManageVisible=t}}},[n("el-form",{ref:"shiftsManageForm",attrs:{model:e.changeShiftsManageForm,rules:e.rules}},[n("el-form-item",{attrs:{error:e.changeShiftsManageFormError.schedule_no,label:"倒班代码",prop:"schedule_no"}},[n("el-input",{model:{value:e.changeShiftsManageForm.schedule_no,callback:function(t){e.$set(e.changeShiftsManageForm,"schedule_no",t)},expression:"changeShiftsManageForm.schedule_no"}})],1),n("el-form-item",{attrs:{error:e.changeShiftsManageFormError.schedule_name,label:"倒班名",prop:"schedule_name"}},[n("el-input",{model:{value:e.changeShiftsManageForm.schedule_name,callback:function(t){e.$set(e.changeShiftsManageForm,"schedule_name",t)},expression:"changeShiftsManageForm.schedule_name"}})],1),n("el-form-item",{attrs:{error:e.changeShiftsManageFormError.description,label:"描述"}},[n("el-input",{model:{value:e.changeShiftsManageForm.description,callback:function(t){e.$set(e.changeShiftsManageForm,"description",t)},expression:"changeShiftsManageForm.description"}})],1),n("el-form-item",{attrs:{label:"周期天数"}},[n("el-input-number",{attrs:{min:1,max:30},on:{blur:function(t){return e.period_change(e.changeShiftsManageForm,e.changeShiftsManageForm.period)}},model:{value:e.changeShiftsManageForm.period,callback:function(t){e.$set(e.changeShiftsManageForm,"period",t)},expression:"changeShiftsManageForm.period"}})],1),n("el-form-item",{attrs:{label:"工序",prop:"work_procedure"}},[n("process-select",{model:{value:e.changeShiftsManageForm.work_procedure,callback:function(t){e.$set(e.changeShiftsManageForm,"work_procedure",t)},expression:"changeShiftsManageForm.work_procedure"}})],1),e._l(e.changeShiftsManageForm.classesdetail_set,(function(t,a){return n("div",{key:a},[n("el-divider",[e._v(e._s(t.classes_name))]),n("el-form-item",{attrs:{label:"时间范围"}},[n("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"开始时间"},model:{value:t.start_time,callback:function(n){e.$set(t,"start_time",n)},expression:"classesdetail.start_time"}}),n("span",[e._v("至")]),n("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"结束时间"},model:{value:t.end_time,callback:function(n){e.$set(t,"end_time",n)},expression:"classesdetail.end_time"}})],1),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{model:{value:t.description,callback:function(n){e.$set(t,"description",n)},expression:"classesdetail.description"}})],1)],1)}))],2),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogCreateChangeShiftsManageVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleCreateChangeShifts}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"编辑倒班时间",visible:e.dialogEditChangeShiftsManageVisible},on:{"update:visible":function(t){e.dialogEditChangeShiftsManageVisible=t}}},[n("el-form",{ref:"shiftsManageEditForm",attrs:{model:e.changeShiftsManageForm,rules:e.rules}},[n("el-form-item",{attrs:{error:e.changeShiftsManageFormError.schedule_no,label:"倒班代码",prop:"schedule_no"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.changeShiftsManageForm.schedule_no,callback:function(t){e.$set(e.changeShiftsManageForm,"schedule_no",t)},expression:"changeShiftsManageForm.schedule_no"}})],1),n("el-form-item",{attrs:{error:e.changeShiftsManageFormError.schedule_name,label:"倒班名",prop:"schedule_name"}},[n("el-input",{model:{value:e.changeShiftsManageForm.schedule_name,callback:function(t){e.$set(e.changeShiftsManageForm,"schedule_name",t)},expression:"changeShiftsManageForm.schedule_name"}})],1),n("el-form-item",{attrs:{error:e.changeShiftsManageFormError.description,label:"描述"}},[n("el-input",{model:{value:e.changeShiftsManageForm.description,callback:function(t){e.$set(e.changeShiftsManageForm,"description",t)},expression:"changeShiftsManageForm.description"}})],1),n("el-form-item",{attrs:{label:"周期天数"}},[n("el-input-number",{attrs:{min:1,max:30},on:{blur:function(t){return e.period_change(e.changeShiftsManageForm,e.changeShiftsManageForm.period)}},model:{value:e.changeShiftsManageForm.period,callback:function(t){e.$set(e.changeShiftsManageForm,"period",e._n(t))},expression:"changeShiftsManageForm.period"}})],1),n("el-form-item",{attrs:{label:"工序",prop:"work_procedure"}},[n("process-select",{model:{value:e.changeShiftsManageForm.work_procedure,callback:function(t){e.$set(e.changeShiftsManageForm,"work_procedure",t)},expression:"changeShiftsManageForm.work_procedure"}})],1),e._l(e.changeShiftsManageForm.classesdetail_set,(function(t,a){return n("div",{key:a},[n("el-divider",[e._v(e._s(t.classes_name))]),n("el-form-item",{attrs:{label:"时间范围"}},[n("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"开始时间"},model:{value:t.start_time,callback:function(n){e.$set(t,"start_time",n)},expression:"classesdetail.start_time"}}),n("span",[e._v("至")]),n("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"结束时间"},model:{value:t.end_time,callback:function(n){e.$set(t,"end_time",n)},expression:"classesdetail.end_time"}})],1),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{model:{value:t.description,callback:function(n){e.$set(t,"description",n)},expression:"classesdetail.description"}})],1)],1)}))],2),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogEditChangeShiftsManageVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleEditChangeShifts}},[e._v("确 定")])],1)],1)],1)},r=[],i=(n("4de4"),n("7db0"),n("a434"),n("a9e3"),n("b680"),n("ac1f"),n("1276"),n("5530")),s=n("5a0c"),o=n.n(s),l=n("1f6c"),c=n("3e51"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-select",{attrs:{value:e.id,clearable:"",placeholder:"请选择"},on:{change:function(t){return e.$emit("change",t)},"visible-change":e.visibleChange}},e._l(e.processOptions,(function(e){return n("el-option",{key:e.id,attrs:{label:e.global_name,value:e.id}})})),1)},d=[],h=(n("96cf"),n("1da1")),g=n("daa1"),f={model:{prop:"id",event:"change"},props:{id:{type:[Number,String],required:!1,default:void 0}},data:function(){return{processOptions:[]}},created:function(){this.getProcessOptions()},methods:{getProcessOptions:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["d"])("get");case 2:n=t.sent,e.processOptions=n.results;case 4:case"end":return t.stop()}}),t)})))()},visibleChange:function(e){e&&this.getProcessOptions()}}},m=f,b=n("2877"),v=Object(b["a"])(m,u,d,!1,null,null,null),p=v.exports,O=n("cf45"),_=n("2f62"),j={components:{pagination:c["a"],processSelect:p},data:function(){return{loading:!0,formLabelWidth:O["a"].formLabelWidth,tableData:[],total:0,getParams:{page:1},workSchedules:[],dialogCreateChangeShiftsManageVisible:!1,dialogEditChangeShiftsManageVisible:!1,changeShiftsManageForm:{schedule_no:"",schedule_name:"",description:"",period:0,work_procedure:null,classesdetail_set:[{start_time:null,end_time:null,description:"",classes_name:"",classes:null}]},changeShiftsManageFormError:{schedule_no:"",schedule_name:"",description:""},classes:[],rules:{schedule_no:[{required:!0,message:"请输入倒班代码",trigger:"blur"}],schedule_name:[{required:!0,message:"请输入倒班名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],work_procedure:[{required:!0,message:"请输选择工序",trigger:"change"}]}}},computed:Object(i["a"])({},Object(_["b"])(["permission"])),created:function(){this.permissionObj=this.permission;var e=this;Object(l["m"])("get",{params:{class_name:"班次"}}).then((function(t){e.classes=t.results})).catch((function(e){})),this.getList()},methods:{getList:function(){this.loading=!0;var e=this;Object(l["W"])("get",null,{params:this.getParams}).then((function(t){e.loading=!1,e.total=t.count,e.tableData=t.results,e.afterGetData()})).catch((function(){e.loading=!1}))},currentChange:function(e){this.getParams.page=e,this.getList()},initChangeShiftsManageForm:function(){this.changeShiftsManageForm={schedule_no:"",schedule_name:"",description:"",period:0,work_procedure:null,classesdetail_set:[]};for(var e=0;e<this.classes.length;++e)this.changeShiftsManageForm.classesdetail_set.push({start_time:null,end_time:null,description:"",classes_name:this.classes[e].global_name,classes:this.classes[e].id})},clearChangeShiftsManageFormError:function(){this.changeShiftsManageFormError={schedule_no:"",schedule_name:"",description:""}},afterGetData:function(){this.workSchedules=this.tableData},showDialogCreateChangeShiftsManage:function(){this.initChangeShiftsManageForm(),this.dialogCreateChangeShiftsManageVisible=!0},handleCreateChangeShifts:function(){var e=this,t=JSON.parse(JSON.stringify(this.changeShiftsManageForm));this.$refs["shiftsManageForm"].validate((function(n){if(!n)return!1;e.clearChangeShiftsManageFormError();for(var a=0;a<t.classesdetail_set.length;++a)t.classesdetail_set[a].start_time&&t.classesdetail_set[a].end_time||(t.classesdetail_set.splice(a,1),--a);0!==t.classesdetail_set.length?Object(l["W"])("post",null,{data:t}).then((function(t){e.dialogCreateChangeShiftsManageVisible=!1,e.$message.success(e.changeShiftsManageForm.schedule_name+"创建成功"),e.getList()})).catch((function(e){})):e.$message("请填写班次")}))},showEditChangeShiftsManageDialog:function(e){this.clearChangeShiftsManageFormError(),this.changeShiftsManageForm=JSON.parse(JSON.stringify(e)),this.dialogEditChangeShiftsManageVisible=!0},handleEditChangeShifts:function(){this.clearChangeShiftsManageFormError();var e=this,t=JSON.parse(JSON.stringify(this.changeShiftsManageForm));this.$refs["shiftsManageEditForm"].validate((function(n){if(!n)return!1;for(var a=0;a<t.classesdetail_set.length;++a)t.classesdetail_set[a].start_time&&t.classesdetail_set[a].end_time||(t.classesdetail_set.splice(a,1),--a);Object(l["W"])("put",t.id,{data:t}).then((function(n){e.dialogEditChangeShiftsManageVisible=!1,e.$message(t.schedule_name+"修改成功"),e.getList()})).catch((function(e){}))}))},handleDeleteChangeShiftsManage:function(e){var t=this,n=e.use_flag?"停用":"启用";this.$confirm("此操作将"+n+e.schedule_name+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["W"])("delete",e.id).then((function(e){t.$message({type:"success",message:"操作成功!"}),t.getList()})).catch((function(e){t.$message.error(e)}))})).catch((function(){}))},getCellText:function(e,t,n){var a="夜班";switch(t){case 0:a="早班";break;case 1:a="中班";break}var r=e.classesdetail_set.find((function(e){return e.classes_name===a}));if(r)return r[n]},getSum:function(e,t){var n=e.classesdetail_set.filter((function(e){return Number(e.classes)===Number(t)}));if(n[0]){var a=n[0].start_time.split(":"),r=n[0].end_time.split(":"),i=o()().set("hour",a[0]).set("minute",a[1]).set("second",a[2]),s=o()().set("hour",r[0]).set("minute",r[1]).set("second",r[2]),l=s.diff(i,"minute");return l<0&&(l=-l),(l/60).toFixed(2)}},getTimeCell:function(e,t,n){var a=e.classesdetail_set.filter((function(e){return Number(e.classes)===Number(t)}));return a[0]?a[0][n]:""},formatter:function(e,t){return e.use_flag?"Y":"N"},period_change:function(e,t){t||(e.period=1)}}},S=j,M=(n("67b7"),Object(b["a"])(S,a,r,!1,null,"a98e861e",null));t["default"]=M.exports}}]);